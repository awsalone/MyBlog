# 第11章 Web的攻击技术

[[toc]]

## 1. 针对Web的攻击技术
简单的HTTP协议本身并不存在安全性问题，因此协议几乎不会成为攻击的对象。应用HTTP协议的服务器和客户端，以及运行在服务器上的Web应用等资源才是攻击目标。   
![网上重要攻击事件明细](/images/HTTP图解/11网上重要攻击事件明细.png)  

### 1.1 HTTP不具备必要的安全功能
几乎现今所有的Web网站都会使用会话管理、加密处理等安全性方面的功能，而HTTP协议内并不具备这些功能。

### 1.2 在客户端即可篡改请求
在HTTP请求报文内加载攻击代码，就能发起对Web应用的攻击。通过URL查询字段或表单、HTTP首部、Cookie等途径把攻击代码传入，若这时Web应用存在安全漏洞，那内部信息就会遭到窃取，或被攻击者拿到管理权限。
![对Web应用的攻击](/images/HTTP图解/11对Web应用的攻击.png)  

### 1.3 针对Web应用的攻击模式
分为主动攻击和被动攻击。
#### 以服务器为目标的主动攻击
主动攻击是指攻击者通过直接访问Web应用，把攻击代码传入的攻击模式。**主动攻击模式具有代表性的有SQL注入攻击和OS命令注入攻击**
![主动攻击](/images/HTTP图解/11主动攻击.png)  

#### 以服务器为目标的被动攻击
被动攻击是指利用圈套策略执行攻击代码的攻击模式。

步骤1：攻击者诱使用户触发已设置好的陷阱，而陷阱会启动发送已嵌入攻击代码的HTTP请求。   
步骤2：当用户中招后，用户的浏览器或邮件客户端会触发这个陷阱。   
步骤3：中招后的用户浏览器会把含有攻击代码的HTTP请求发送给作为攻击目标的Web应用，运行攻击代码。    
步骤4：执行完攻击代码，存在安全漏洞的Web应用会成为攻击者的跳板，可能导致用户所持的Cookie等个人信息被窃取，登录状态中的用户权限遭到恶意滥用。

**被动攻击具有代表的攻击是跨站脚本攻击和跨站点请求伪造**。
![被动攻击](/images/HTTP图解/11被动攻击.png)  

![利用被动攻击对企业内网发动攻击](/images/HTTP图解/11利用被动攻击对企业内网发动攻击.png)  

## 2. 因输出值转义不完全引发的安全漏洞
实施Web应用的安全对策可大致分为以下两部分：   
- 客户端的验证
- Web应用端（服务器端）的验证   
  输入值验证  
  输出值转义  
  
由于客户端允许篡改数据或关闭js，不适合将JavaScript验证作为安全的防范对策。保留客户端验证只是为了尽早辨识输入错误，起到提高UI体验的作用。
  
从数据库或文件系统、HTML、邮件等输出Web应用处理的数据之际，针对输出做值转义处理是一项至关重要的安全策略。当输出值转义不完全时，会因触发攻击者传入的攻击代码，而给输出对象带来损害。

### 2.1 跨站脚本攻击
### 2.2 SQL注入攻击
### 2.3 OS命令注入攻击
### 2.4 HTTP首部注入攻击
### 2.5 邮件首部注入攻击
### 2.6 目录遍历攻击
### 2.7 远程文件包含漏洞

## 3. 因设置或设计上的缺陷引发的安全漏洞
### 3.1 强制浏览
### 3.2 不正确的错误信息处理
### 3.3 开放重定向

## 4. 因会话管理疏忽引发的安全漏洞
### 4.1 会话劫持
### 4.2 会话固定攻击
### 4.3 跨站点请求伪造

## 5. 其他安全漏洞
### 5.1 密码破解
### 5.2 点击劫持
### 5.3 DoS攻击
### 5.4 后门程序