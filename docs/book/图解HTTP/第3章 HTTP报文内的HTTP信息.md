# 第3章 HTTP报文内的HTTP信息

HTTP通信过程包括从客户端发往服务器端的请求及从服务器端返回客户端的响应。

## HTTP报文
HTTP协议交互的信息称为HTTP报文。请求端的HTTP报文叫请求报文，服务端的叫响应报文。HTTP报文是由多行数据构成的字符串文本。  
HTTP报文分为报文首部和报文主体两块。

## 请求报文及响应报文的结构
![报文结构](/images/HTTP图解/3报文结构.png)
![报文实例](/images/HTTP图解/3报文实例.png)

## 编码提升传输速率
在传输中可以通过编码提升传输速率。通过在传输时编码，能够处理大量的访问请求。但是会消耗更多的CPU等资源。

### 报文主体和实体主体的差异
实体（entity），作为请求或响应的有效载荷数据被传输，其内容由实体首部和实体主体组成。

HTTP报文的主体用于传输请求或者响应的实体主体。  
通常，报文主体等于实体主体。只有当传输中进行编码操作时，实体主体内容发送变化，才导致它和报文主体产生差异。

### 压缩传输的内容编码
内容编码指明应用在实体内容上的编码格式，并保持实体信息原样压缩。内容编码后的实体由客户端接收并负责解码。
![内容编码](/images/HTTP图解/3内容编码.png)

常见的内容编码有以下几种：
- gzip
- compress（UNIX系统的标准压缩）
- deflate（zlib）
- identity（不进行编码）

### 分割发送的分块传输编码
在HTTP通信过程中，请求的编码实体资源尚未全部传输完成之前，浏览器无法显示请求页面。在传输大容量数据时，通过把数据分割成多块，能够让浏览器逐步显示页面。把实体主体分块的功能称为分块传输编码。
![分块传输编码](/images/HTTP图解/3分块传输编码.png)

分块传输编码会将实体主体分为多个部分。每一块都会用16进制来标记块大小，最后一块会使用“0(CR+LF)”来标记。

实体主体会由接收的客户端负责解码，恢复到编码前的实体主体。

